---
title:  "模块十<br>DeepSeek辅助R编程与数据分析"
date: today
author: "李宗璋"
format: 
  revealjs:
    incremental: FALSE
    theme: sky
    slide-number: true
    chalkboard: 
      buttons: true
    preview-links: auto
    css: styles.css
    footer: |
      <https://lizongzhang.github.io/deepseekcamp><br>© 2025 顶刊研习社 
    include-before-body: 
      - header.html
      - fonts.html
    title-slide-attributes: 
      data-background-image: "img/bili_up.jpg"  
      data-background-size: "80px"        
      data-background-position: "center bottom 120px"  
    plugins: [highlight, zoom, notes]
editor: 
  markdown: 
    wrap: 72
---

## 模块十 DeepSeek辅助R编程与数据分析 {auto-animate="true"}

-   10.1 DeepSeek辅助R语言快速入门

-   10.2 R语言编程特点

-   10.3 R语言接入AI

-   10.4 DeepSeek辅助R语言编写代码

-   10.5 DeepSeek辅助R语言完成医学数据分析

-   10.6 DeepSeek辅助R语言实操与讨论

------------------------------------------------------------------------

## 10.1 DeepSeek辅助R语言快速入门

-   10.1.1 为什么用DeepSeek学R？

-   10.1.2 人人都能用R了！一个简单的示例

-   10.1.3 DeepSeek教不会什么？这几点你得自己掌握

------------------------------------------------------------------------

## 10.1.1 为什么用DeepSeek学R

-   R语言是一门强大但语法灵活的编程语言，对初学者有一定门槛。

-   DeepSeek具备自然语言理解与代码生成能力：

    -   快速生成代码

    -   自动解释代码报错或结果输出

    -   扩展功能包、实现复杂流程

-   进入“AI辅助编程”时代，将改变R语言的学习方式，从"查命令"转为"提问题"。

------------------------------------------------------------------------

### 10.1.1 传统的R学习方式

-   Book：Wickham H, Grolemund G. R for data science, R for Data Science
    (2e)
    [https://r4ds.hadley.nz/](https://r4ds.hadley.nz/){target="_blank"}

-   Book：Wickham H, ggplot2: Elegant Graphics for Data Analysis (3e)
    [https://ggplot2-book.org/](https://ggplot2-book.org/){target="_blank"}

-   查看R帮助

-   搜索引擎

------------------------------------------------------------------------

### 10.1.1 DeepSeek为何擅长R语言教学？

-   自然语言驱动，降低编程门槛

-   目标导向学习，突出“做事”而非“记语法”

-   学习者只需描述“我想要分析...”，DeepSeek便可完成：

    -   数据清洗/统计分析/结果解读

    -   实时解释与错因分析，促进理解

    -   解释代码/诊断报错/优化代码

-   支持复合任务，一步生成完整工作流

    -   缺失值处理/t检验/画图/生成文字报告

------------------------------------------------------------------------

### R帮助文档 VS DeepSeek的回答

::::::: columns
:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.1.1pic1.png" style="width: 100%;"/>
:::
::::

:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.1.1pic2.png" style="width: 100%;"/>
:::
::::
:::::::

------------------------------------------------------------------------

## 10.1.2 人人都能用R了！一个简单的示例

> 🧭 用iris数据，进行方差分析，给出R代码。

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.1.1pic3.png)
:::

------------------------------------------------------------------------

## 10.1.3 DeepSeek教不会什么？这几点你得自己掌握

-   RStudio主界面

-   如何高效管理文件？

    -   项目project

-   在写R代码的实践中积累的“经验”

    -   📚 如何读懂 R 的帮助文档

    -   📚 如何写一段"漂亮聪明"的代码

        -   简洁/可复制性

        -   美观/易读(代码注释、分节)

    -   📚 如何用最少的代码完成最多的任务

        -   对数据结构(阵列array/列表list)的理解(job.proj)

        -   学习高手的代码

------------------------------------------------------------------------

### 漂亮的代码

-   赋值符用\<-, 不用=。=只用于函数参数的赋值

-   逗号后面空格，逗号前不空格(与英文句子中逗号的使用一致)

-   =、==、+、-、\<-, \~, %\>%，｜等用空格包围

-   具有高优先级的运算符包括：::、:::、\$、\@、\[、\[\[、\^，不用空格包围

-   一行代码不要太长

------------------------------------------------------------------------

## 10.2 R语言编程特点--优势

-   免费

-   可重复性

-   扩展包

    -   按任务浏览R包：[https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/){target="_blank"}

    -   R包下载排行榜:
        [https://www.r-pkg.org/](https://www.r-pkg.org/){target="_blank"}

-   学术前沿

------------------------------------------------------------------------

## 10.2 R语言编程特点--挑战

-   入门难

-   代码容易忘

    -   注释/R自带的提示性键入

-   包太多/难以选择

    -   问DeepSeek：R中能做XXX的有哪些包？比较这些包？哪个更好用？
    -   🎯 专为 R 用户定制的搜索引擎
        [https://rseek.org](https://rseek.org){blank="_blank"}
    -   📚 快速找到函数用法、R 包文档、代码示例
    -   ✅ 搜索结果只与 R 有关，不混杂其他语言

-   报错

    -   AI可以帮你分析报错信息

------------------------------------------------------------------------

### 如何选择R包？

> 🧭 比较可以实现XXX分析的包，哪个最好？

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.2pic1.png)
:::

------------------------------------------------------------------------

## 10.3 R语言接入AI

-   RStudio插件{gptstudio}

    -   需要设置API
        key(新用户5美元额度，之后按token计费)/科学上网/响应速度不稳定

-   Github Copilot

    -   由GitHub和OpenAI合作开发, 2021年6月发布

    -   2023年9月接入RStudio

    -   代码自动完成

    -   自动生成注释

    -   适应性学习

------------------------------------------------------------------------

### {gptstudio}插件

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3pic1.png)
:::

------------------------------------------------------------------------

### Github Copilot

-   创建账号：https://github.com/features/copilot

    -   试用期1个月，10\$/month

-   学生/教师可申请加入 GitHub Education：https://github.com/education

    -   可免费使用Github Copilot

    -   [如何申请?](https://docs.github.com/zh/education/explore-the-benefits-of-teaching-and-learning-with-github-education/github-education-for-teachers/apply-to-github-education-as-a-teacher){target="_blank"}

------------------------------------------------------------------------

### 在RStudio中绑定Github Copilot账号

-   Sign In时需要科学上网，后续不需要

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3signin.png)
:::

------------------------------------------------------------------------

### 授权

::::::: columns
:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.3deviceactive.png" style="width: 100%;"/>
:::
::::

:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.3entercode.png" style="width: 100%;"/>
:::
::::
:::::::

------------------------------------------------------------------------

### 验证code, 授权成功

::::::: columns
:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.3verify.png" style="width: 100%;"/>
:::
::::

:::: {.column width="50%"}
::: {style="max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
<img src="img/10.3enable.png" style="width: 100%;"/>
:::
::::
:::::::

------------------------------------------------------------------------

### 如何利用github copilot写R代码？

-   键入代码时，Copilot将根据上下文和您的输入提供自动建议。

-   接受建议： 按 Tab 键接受建议并将其插入到代码中。

-   拒绝建议： 继续输入代码，Copilot 会自动更新建议。

-   支持中文

-   给代码添加注释

------

## 10.4 DeepSeek辅助R语言编写代码

10.4.1 先看看R能做什么？

10.4.2 绘图

10.4.3 检验

10.4.4 建模

------

## 10.4.1 先看看R能做什么？

> 🧭 利用iris数据，可以开展哪些统计分析，写出R代码。


::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3signin.png)
:::

---

## 10.4.2 绘图

[Prompt]:按[定性变量]分组，绘制各变量的箱线图。

[Prompt]: 用[ggplot2]绘制按[定性变量]分组后，各变量的箱线图。

[Prompt]:让上述4个图形显示在同一窗口。

[Prompt]: 用[ggpubr]绘制分组箱线图。


---


::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3signin.png)
:::

---

## 10.4.3 检验

[Prompt]: 按[定性变量]分组，检验三个组别的[定量变量]的均值是否相等？。

[Prompt]:该数据满足ANOVA检验的适用条件吗？

[Prompt]: 每个组别内的[定量变量]观测值是否近似正态分布？

[Prompt]:R 中进行方差齐性检验的函数是什么？

[Prompt]: bartlett.test()函数的结果如何看？

[Prompt]:数据集不同组别之间的[定量变量]观测值方差不等，还能用ANOVA检验吗？

[Prompt]: Welch’s ANOVA的命令是什么？

----



::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3signin.png)
:::

---

## 10.4. 4 建模

[Prompt]:基于iris数据，建立Species的判别函数？
[Prompt]:判别函数的输出结果如何解读？
[Prompt]:如何利用判别函数判定一朵鸢尾花属于哪个组别？




::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/10.3signin.png)
:::

---

### 提问技巧

如何在R中实现XX计算/检验？请用R自带的数据集举例说明。
用XX包在R中实现XX计算/检验？请用R自带的数据集举例说明。
指定包的名称，例如ggplot2
XX计算/检验/方法的适用条件是什么？
在R中如何考察XX方法/检验的适用条件是否满足？
如何解读XX函数的输出结果的含义？
R中的XX分析有哪些可视化工具？

---



DeepSeek: “提示词”(Prompt)驱动的大语言模型(LLM)。

核心优势：与临床研究者进行“可解释的统计对话”。

| 🚀 能力维度   | DeepSeek 如何支持统计协作            |
|---------------|--------------------------------------|
| 🧩 认知支持   | 说明统计术语、检验条件、适用场景     |
| 📊 结果解读   | 解读OR/HR、Logistic或Cox模型         |
| 📈 图表表达   | 解读KM曲线、森林图等                 |
| ✍️ 文本重构   | 输出期刊风格的统计分析段落           |
| 💬 多轮互动   | Prompt→输出→提问→优化写作            |
| 📦 Prompt积累 | 构建个人“统计分析提示词库”，复用迁移 |

------------------------------------------------------------------------

## 9.1.2 DeepSeek如何助力统计学习？

-   重构统计学习方式

    -   互动式

    -   针对性

    -   不要撒网式学习

------------------------------------------------------------------------

## 9.1.2 DeepSeek如何助力统计学习？

-   统计学习的重心
    -   基础知识(本科课程已涵盖)
        -   变量类型: 定性(无序/有序), 定量(离散/连续)
        -   参数估计: 置信水平，置信区间
        -   假设检验: 双/单侧检验，显著性水平, p值, 临界值, 检验统计量
    -   方法选择
    -   结果解读

------------------------------------------------------------------------

### 🔍 示例1 什么是置信水平？

> 提问句式：用最通俗的方式解释什么是置信水平？

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/9.1eg1.png)
:::

------------------------------------------------------------------------

### 🔍 示例1 什么是置信水平？

> 提问句式：请用数值模拟上述解释过程，让我理解起来更加容易。给出数值模拟的R代码，并加以解释。

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/9.1eg2.png)
:::

------------------------------------------------------------------------

### 🔍 示例1 什么是置信水平？

> 提问句式：请用数值模拟上述解释过程，让我理解起来更加容易。给出数值模拟的R代码，并加以解释。

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/9.1eg3.png)
:::

------------------------------------------------------------------------

### 🔍 示例2 se和sd的区别

> 提问句式：standar error 和 standard deviation
> 有什么区别？请用最通俗的方式解释。

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/9.1eg4.png)
:::

------------------------------------------------------------------------

### 🔍 示例2 se和sd的区别

> 提问句式：standar error 和 standard deviation
> 有什么区别？请用最通俗的方式解释。

::: {style="height: 600px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"}
![](img/9.1eg5.png)
:::

------------------------------------------------------------------------

### 📘 权威期刊建议

::: {.callout-note title="推荐做法"}
《Nature》、《Cell》、《JAMA》、《NEJM》 等权威医学与生物期刊明确建议：

> 柱状图或点图的误差线应使用 **标准误差（SE）** 或
> **置信区间（CI）**，而非 **标准差（SD）**，以避免误导读者。
:::

### 📚 参考文献

Cumming G, Fidler F, Vaux DL. (2007). [Error bars in experimental
biology](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2064100/). The
Journal of Cell Biology, 177(1):7–11.

> 该文指出：**SD
> 描述数据变异性，而非估计均值的可信度**，因此在展示组间比较时使用 SE 或
> CI 更有解释力。

------------------------------------------------------------------------

## 9.1.2 重构统计学习方式：从被动学习到主动建构

\

### 💡 不再是“学完了才能用”，而是“在用中学习，在问中学”

\

### 📕️ 传统模式：教科书主导，学生被动接受

-   教材编什么，读者学什么\
-   顺着教材目录走，忽视了**统计思维**的培养、“统计写作”能力的训练

### 🚀 DeepSeek模式：需求驱动，Prompt引导学习

-   先有问题，后找方法\
-   不再强调公式/计算/软件操作，而是**围绕科研任务主动构建统计能力**

> 📌
> **统计学习的未来，不是依靠更全面系统的教材，而是善于利用AI工具的引导。**

------------------------------------------------------------------------

### 练习作业

-   上传你论文中的一张表格(如Table 1 或
    回归模型估计表格)，请DeepSeek写作对应的统计分析段落。 \|

-   将你过去最头疼的统计部分（如生存分析、PSM段落）写成Prompt试试看 \|

------------------------------------------------------------------------

## 模块十 总结

-   ✅ DeepSeek如何助力统计方法的学习？

-   ✅ DeepSeek如何助力统计方法的运用？

-   ✅ DeepSeek如何助力写出医学论文中的统计方法/结果/讨论段落的写作？

------------------------------------------------------------------------

## 致谢

> 医生不必精通统计，但值得拥有一位懂统计、会表达的AI助手。

\

> DeepSeek不是统计学家，却总能说出你心中那句“有理有据”。

\

> 把统计分析交给AI，把思考留给科学。

\
\

感谢大家的参与！欢迎提问交流！
